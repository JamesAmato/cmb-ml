raw:
  assets_out:
    planck_deltabandpass:
      fn: planck_deltabandpass.tbl
      handler: QTable
      path_template: "{src_root}/{fn}"
  dir_name: Raw
check-configs:
create-noise:
  assets_out:
    noise_cache:
      fn: "noise_sd_map.fits"
      handler: NoiseCache
      path_template: "{root}/{dataset}/{stage}/{freq}_{field}_{fn}"
  assets_in:
    planck_deltabandpass: {stage: raw}
  splits:
    - train
    - test
  dir_name: Simulation_B_NoiseCache
create-configs:
  assets_out:
    split_configs:
      fn: "split_config.yaml"
      handler: Config
      path_template: "{root}/{dataset}/{stage}/{split}/{fn}"
    wmap_config_fixed:
      fn: "wmap_params.yaml"
      handler: Config
      path_template: "{root}/{dataset}/{stage}/{split}/{fn}"
    wmap_config_varied:
      fn: "wmap_params.yaml"
      handler: Config
      path_template: "{root}/{dataset}/{stage}/{split}/{sim}/{fn}"
  splits:
    - train
    - test
  dir_name: Simulation_C_Configs
create-fid-ps:
  assets_out:
    cmb_ps_fid_fixed:
      fn: "cmb_ps_fid.txt"
      handler: PowerSpectrum
      path_template: "{root}/{dataset}/{stage}/{split}/{fn}"
    cmb_ps_fid_varied:
      fn: "cmb_ps_fid.txt"
      handler: PowerSpectrum
      path_template: "{root}/{dataset}/{stage}/{split}/{sim}/{fn}"
  assets_in:
    split_configs: {stage: create-configs}
    wmap_config_fixed: {stage: create-configs}
    wmap_config_varied: {stage: create-configs}
    noise_cache: {stage: create-noise}
  splits:
    - train
    - test
  dir_name: Simulations_D_CMB_Power_Spectra
create-sims:
  assets_out:
    cmb_map_fid:
      fn: "cmb_map_fid.fits"
      handler: HealpyMapTemp
      path_template: "{root}/{dataset}/{stage}/{split}/{sim}/{fn}"
    cmb_ps_der:
      fn: "cmb_ps_der.txt"
      handler: NoHandler
      path_template: "{root}/{dataset}/{stage}/{split}/{sim}/{fn}"
    sims:
      fn: "obs_{det}_map.fits"
      handler: ManyHealpyMapsTemp
      path_template: "{root}/{dataset}/{stage}/{split}/{sim}/{fn}"
  assets_in:
    planck_deltabandpass: {stage: raw}
    noise_cache: {stage: create-noise}
    split_configs: {stage: create-configs}
    wmap_config_fixed: {stage: create-configs}
    wmap_config_varied: {stage: create-configs}
    cmb_ps_fid_fixed: {stage: create-fid-ps}
    cmb_ps_fid_varied: {stage: create-fid-ps}
  splits:
    - train
    - test
  dir_name: Simulations